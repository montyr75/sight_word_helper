<!-- Polymer Dart element that allows HTML to be inserted into the DOM via data binding -->
<link rel="import" href="../../../../packages/polymer/polymer.html">

<polymer-element name="html-display" extends="div">
  <script type="application/dart">
    import 'dart:html';
    import 'package:polymer/polymer.dart';

    @CustomTag('html-display')
    class HtmlDisplay extends DivElement with Polymer, Observable {
      @published String htmlContent;

      // we need this stuff because we're extending <div> instead of PolymerElement
      factory HtmlDisplay() => new Element.tag('div', 'html-display');
      HtmlDisplay.created() : super.created() {
        polymerCreated();
      }

      @override void attached() {
        super.attached();
      }

      // respond to any change in the "htmlContent" attribute
      void htmlContentChanged(oldValue) {
        if (htmlContent == null) {
          htmlContent = "";
        }

        // creating a DocumentFragment allows for HTML parsing
        this.nodes..clear()..add(new DocumentFragment.html("$htmlContent"));
      }
    }
  </script>
</polymer-element>